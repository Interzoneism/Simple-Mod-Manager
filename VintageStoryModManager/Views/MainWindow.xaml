<Window
    x:Class="VintageStoryModManager.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:VintageStoryModManager.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:design="clr-namespace:VintageStoryModManager.Design"
    xmlns:helpers="clr-namespace:VintageStoryModManager.Helpers"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:services="clr-namespace:VintageStoryModManager.Services"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:ui="http://schemas.modernwpf.com/2019"
    xmlns:viewModels="clr-namespace:VintageStoryModManager.ViewModels"
    xmlns:views="clr-namespace:VintageStoryModManager.Views"
    x:Name="MainWindowRoot"
    Title="Simple VS Manager"
    Width="1558"
    Height="719"
    MinWidth="1000"
    MinHeight="775"
    d:DataContext="{d:DesignInstance Type={x:Type design:MainWindowDesignData},
                                     IsDesignTimeCreatable=False}"
    AllowDrop="True"
    Background="Transparent"
    PreviewDragEnter="MainWindow_OnPreviewDragEnter"
    PreviewDragOver="MainWindow_OnPreviewDragOver"
    PreviewDrop="MainWindow_OnPreviewDrop"
    PreviewKeyDown="MainWindow_OnPreviewKeyDown"
    ResizeMode="CanResize"
    UseLayoutRounding="False"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/MainWindowStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <!--  BindingProxy to enable DataContext binding in DataGrid columns  -->
            <helpers:BindingProxy x:Key="DataContextProxy" Data="{Binding}" />

            <Style
                x:Key="CloseButton"
                BasedOn="{StaticResource IMM.ButtonBaseStyle}"
                TargetType="{x:Type Button}">
                <Setter Property="BorderBrush" Value="Transparent" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Padding" Value="8,4" />
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{DynamicResource Brush.Button.Primary.Background.Hover}" />
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Background" Value="{DynamicResource Brush.Button.Primary.Background.Pressed}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Background" Value="{DynamicResource Brush.Button.Primary.Background.Disabled}" />
                        <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Placeholder}" />
                    </Trigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="ButtonFocusVisualStyle1" />
            <ControlTemplate x:Key="ButtonTemplate1" />
        </ResourceDictionary>
    </Window.Resources>


    <!--  ============================================================  -->
    <!--  Main Window Layout: 3-row grid  -->
    <!--  ============================================================  -->
    <Grid x:Name="RootGrid" Background="{DynamicResource Brush.ComboBox.Background.Disabled}">

        <Grid.RowDefinitions>
            <RowDefinition Height="32" MinHeight="10" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  ============================================================  -->
        <!--  TOP: Menu Bar and Notification Links  -->
        <!--  ============================================================  -->
        <Grid
            x:Name="TOP"
            Height="32"
            Margin="0,2,0,0"
            VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="500" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Main Application Menu  -->
            <Border Grid.Column="0" CornerRadius="0,0,5,0">

                <Menu
                    HorizontalContentAlignment="Center"
                    Background="Transparent"
                    BorderThickness="0"
                    Foreground="{DynamicResource Brush.Text.Primary}"
                    IsMainMenu="True"
                    UseLayoutRounding="True">
                    <Menu.Resources>
                        <Style BasedOn="{StaticResource ToggleMenuItemStyle}" TargetType="{x:Type MenuItem}" />
                    </Menu.Resources>

                    <MenuItem
                        Height="24"
                        Padding="6,0,6,0"
                        HorizontalContentAlignment="Center"
                        Header="_File"
                        UseLayoutRounding="True">
                        <MenuItem
                            Height="35"
                            Click="SelectDataFolderMenuItem_OnClick"
                            Header="Set _Data Folder..." />
                        <MenuItem
                            Height="35"
                            Click="SelectGameFolderMenuItem_OnClick"
                            Header="Set _Game Folder..." />
                        <MenuItem
                            x:Name="GameProfilesMenuItem"
                            Height="35"
                            Header="Game Profiles"
                            SubmenuOpened="GameProfilesMenuItem_OnSubmenuOpened">
                            <MenuItem
                                x:Name="CreateGameProfileMenuItem"
                                Height="35"
                                Click="CreateGameProfileMenuItem_OnClick"
                                Header="Create new..." />
                            <MenuItem
                                x:Name="DeleteGameProfileMenuItem"
                                Height="35"
                                Padding="12,6"
                                Click="DeleteGameProfileMenuItem_OnClick"
                                Focusable="False"
                                Header="Delete profile..."
                                Opacity="0.75" />
                        </MenuItem>
                        <MenuItem
                            Height="35"
                            Header="Restore mods backup"
                            SubmenuOpened="RestoreBackupMenuItem_OnSubmenuOpened">
                            <MenuItem Header="Loading..." IsEnabled="False" />
                        </MenuItem>
                        <MenuItem
                            x:Name="RestoreDataFolderMenuItem"
                            Height="35"
                            Header="Restore VintagestoryData backup"
                            SubmenuOpened="RestoreDataFolderMenuItem_OnSubmenuOpened">
                            <MenuItem Header="Loading..." IsEnabled="False" />
                        </MenuItem>
                        <MenuItem
                            x:Name="AutomaticDataBackupsMenuItem"
                            Height="35"
                            Click="AutomaticDataBackupsMenuItem_OnClick"
                            Header="Automatically back up VintagestoryData before launch"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                        <Separator />
                        <MenuItem
                            Height="35"
                            Click="ExitMenuItem_OnClick"
                            Header="E_xit" />
                    </MenuItem>
                    <MenuItem
                        Height="24"
                        Padding="6,0,6,0"
                        Header="_Mods"
                        SubmenuOpened="ModsMenuItem_OnSubmenuOpened"
                        UseLayoutRounding="True">
                        <MenuItem
                            Padding="12,6"
                            Click="ScanForModConfigsMenuItem_OnClick"
                            Header="Scan for mod config files" />
                        <MenuItem
                            Height="35"
                            Click="CheckModsCompatibilityMenuItem_OnClick"
                            Header="Check mods compatibility" />
                        <MenuItem
                            x:Name="RequireExactVsVersionMenuItem"
                            Height="35"
                            Click="RequireExactVsVersionMenuItem_OnClick"
                            Header="Require exact VS version for compatibility checks"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                        <MenuItem
                            x:Name="CacheAllVersionsMenuItem"
                            Height="35"
                            Click="CacheAllVersionsMenuItem_OnClick"
                            Header="Cache all versions locally"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                        <MenuItem
                            x:Name="DeleteCachedModsMenuItem"
                            Height="35"
                            Click="DeleteCachedModsMenuItem_OnClick"
                            Header="_Delete Cached Mods" />
                    </MenuItem>
                    <MenuItem
                        Height="24"
                        Padding="6,0,6,0"
                        Header="_Folders"
                        UseLayoutRounding="True">
                        <MenuItem
                            Height="35"
                            Click="OpenModFolderButton_OnClick"
                            Header="Open _Mods folder" />
                        <MenuItem
                            Height="35"
                            Click="OpenLogsFolderButton_OnClick"
                            Header="Open _Logs folder" />
                        <MenuItem
                            Height="35"
                            Click="OpenConfigFolderButton_OnClick"
                            Header="Open _Config folder" />
                        <MenuItem
                            Height="35"
                            Click="OpenModlistsFolderButton_OnClick"
                            Header="Open Modlists folder" />
                        <MenuItem
                            Height="35"
                            Click="ManagerDataFolderMenuItem_OnClick"
                            Header="Open _Simple VS Manager folder" />
                    </MenuItem>
                    <MenuItem
                        x:Name="PresetsAndModlistsMenuItem"
                        Height="24"
                        Padding="6,0,6,0"
                        Header="_Save &amp; Load"
                        UseLayoutRounding="True">
                        <MenuItem
                            Height="35"
                            Click="SaveModlistMenuItem_OnClick"
                            Header="Save _Modlist..." />
                        <MenuItem
                            Height="35"
                            Click="LoadModlistMenuItem_OnClick"
                            Header="Load _Modlist..." />
                        <Separator />
                        <MenuItem
                            Height="35"
                            Click="SavePresetMenuItem_OnClick"
                            Header="_Save Preset..." />
                        <MenuItem
                            x:Name="LoadPresetMenuItem"
                            Height="35"
                            Header="_Load Preset"
                            SubmenuOpened="LoadPresetMenuItem_OnSubmenuOpened">
                            <MenuItem
                                x:Name="BrowsePresetMenuItem"
                                Height="35"
                                Click="LoadPresetMenuItem_OnClick"
                                Header="_Browse..." />
                        </MenuItem>
                        <Separator />
                        <MenuItem
                            x:Name="AlwaysClearModlistsMenuItem"
                            Height="35"
                            Click="AlwaysClearModlistsMenuItem_OnClick"
                            Header="Always clear mods before loading Modlist"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                        <MenuItem
                            x:Name="AlwaysAddModlistsMenuItem"
                            Height="35"
                            Click="AlwaysAddModlistsMenuItem_OnClick"
                            Header="Always add to current mods when loading Modlist"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                    </MenuItem>
                    <MenuItem
                        x:Name="PerformanceMenuItem"
                        Height="24"
                        Padding="6,0,6,0"
                        Header="_Performance"
                        UseLayoutRounding="True">
                        <MenuItem
                            x:Name="DisableAutoRefreshMenuItem"
                            Height="35"
                            Click="DisableAutoRefreshMenuItem_OnClick"
                            Header="_Disable auto-refresh (Faster startup, use manual Refresh button)"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                        <MenuItem
                            x:Name="UseFasterThumbnailsMenuItem"
                            Height="35"
                            Click="UseFasterThumbnailsMenuItem_OnClick"
                            Header="_Faster thumbnails (Faster to load in mod database)"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                        <MenuItem
                            x:Name="DisableHoverEffectsMenuItem"
                            Height="35"
                            Click="DisableHoverEffectsMenuItem_OnClick"
                            Header="Disable _hover and transition visual effects"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                    </MenuItem>
                    <MenuItem
                        Height="24"
                        Padding="6,0,6,0"
                        Header="_View"
                        UseLayoutRounding="True">
                        <MenuItem
                            Height="35"
                            Header="_Compact View"
                            IsCheckable="True"
                            IsChecked="{Binding IsCompactView, Mode=TwoWay}"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                        <MenuItem x:Name="ThemesMenuItem" Height="35" Header="_Themes">
                            <MenuItem
                                x:Name="VintageStoryThemeMenuItem"
                                Height="35"
                                Click="ThemeMenuItem_OnClick"
                                Header="_Vintage Story"
                                IsCheckable="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Tag="{x:Static services:ColorTheme.VintageStory}" />
                            <MenuItem
                                x:Name="DarkThemeMenuItem"
                                Height="35"
                                Click="ThemeMenuItem_OnClick"
                                Header="_Dark"
                                IsCheckable="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Tag="{x:Static services:ColorTheme.Dark}" />
                            <MenuItem
                                x:Name="LightThemeMenuItem"
                                Height="35"
                                Click="ThemeMenuItem_OnClick"
                                Header="_Light"
                                IsCheckable="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Tag="{x:Static services:ColorTheme.Light}" />
                            <Separator x:Name="CustomThemesSeparator" />
                            <MenuItem
                                x:Name="EditThemeMenuItem"
                                Height="35"
                                Click="EditThemeMenuItem_OnClick"
                                Header="_Edit theme..." />
                        </MenuItem>
                        <MenuItem
                            x:Name="ColumnsMenuItem"
                            Height="35"
                            Header="_Columns"
                            Visibility="{Binding IsViewingMainTab, Converter={StaticResource IMM.BooleanToVisibilityConverter}}">
                            <MenuItem
                                x:Name="ActiveColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="_Active"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="IconColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="_Icon"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="NameColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="_Name"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="VersionColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="_Version"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="LatestVersionColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="Latest _Version"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="AuthorsColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="_Authors"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="TagsColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="_Tags"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="StatusColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="_Status"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="UserReportsColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="User _Reports"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                            <MenuItem
                                x:Name="SideColumnMenuItem"
                                Checked="InstalledModsColumnMenuItem_OnChecked"
                                Header="S_ide"
                                IsCheckable="True"
                                IsChecked="True"
                                Style="{StaticResource ToggleMenuItemStyle}"
                                Unchecked="InstalledModsColumnMenuItem_OnChecked" />
                        </MenuItem>
                    </MenuItem>
                    <MenuItem
                        Height="24"
                        Padding="6,0,6,0"
                        Header="_Help &amp; About"
                        UseLayoutRounding="True">
                        <MenuItem
                            x:Name="ManagerVersionMenuItem"
                            Padding="12,6"
                            Focusable="False"
                            Header="Version: --"
                            IsEnabled="False"
                            Opacity="0.75" />
                        <MenuItem
                            x:Name="GameVersionMenuItem"
                            Padding="12,6"
                            Focusable="False"
                            Header="Vintage Story: --"
                            IsEnabled="False"
                            Opacity="0.75"
                            Visibility="Collapsed" />
                        <Separator />
                        <MenuItem
                            Padding="12,6"
                            Click="GuideMenuItem_OnClick"
                            Header="Menu Guide" />
                        <MenuItem
                            Padding="12,6"
                            Click="HelpMenuItem_OnClick"
                            Header="Help!" />
                        <MenuItem
                            Padding="12,6"
                            Click="ManagerModDbPageMenuItem_OnClick"
                            Header="Open _Mod DB page for the manager" />
                        <MenuItem
                            Padding="12,6"
                            Click="ClearAllCachesMenuItem_OnClick"
                            Header="Clear temporary cache (Safe to use, nothing important is removed)" />
                    </MenuItem>
                    <MenuItem
                        Height="24"
                        Padding="6,0,6,0"
                        Header="_Advanced"
                        UseLayoutRounding="True">
                        <MenuItem
                            Height="35"
                            Click="SetCustomShortcutMenuItem_OnClick"
                            Header="Set Custom Vintage Story Shortcut" />
                        <MenuItem
                            x:Name="DeveloperProfilesMenuItem"
                            Padding="12,6"
                            Header="Developer Profiles"
                            Visibility="Collapsed" />
                        <MenuItem
                            Padding="12,6"
                            Click="ChangeManagerFolderMenuItem_OnClick"
                            Header="Change manager config and cache folder..." />
                        <MenuItem
                            Padding="12,6"
                            Click="RestoreFirebaseAuthBackupMenuItem_OnClick"
                            Header="Restore firebase-auth.json using backup" />
                        <MenuItem
                            x:Name="DisableInternetAccessMenuItem"
                            Height="35"
                            Click="DisableInternetAccessMenuItem_OnClick"
                            Header="_Disable Internet Access"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />
                        <MenuItem
                            x:Name="EnableServerOptionsMenuItem"
                            Padding="12,6"
                            Click="EnableServerOptionsMenuItem_OnClick"
                            Header="Enable server options"
                            IsCheckable="True"
                            Style="{StaticResource ToggleMenuItemStyle}" />

                        <MenuItem Padding="12,6" Header="Enable logging for...">
                            <MenuItem
                                x:Name="LogModUpdateMenuItem"
                                Height="35"
                                Click="LogModUpdateMenuItem_OnClick"
                                Header="Mod update"
                                IsCheckable="True"
                                Style="{StaticResource ToggleMenuItemStyle}" />
                            <MenuItem
                                x:Name="LogModInstallMenuItem"
                                Height="35"
                                Click="LogModInstallMenuItem_OnClick"
                                Header="Mod installation"
                                IsCheckable="True"
                                Style="{StaticResource ToggleMenuItemStyle}" />
                            <MenuItem
                                x:Name="LogModDeletionMenuItem"
                                Height="35"
                                Click="LogModDeletionMenuItem_OnClick"
                                Header="Mod deletion"
                                IsCheckable="True"
                                Style="{StaticResource ToggleMenuItemStyle}" />
                            <MenuItem
                                x:Name="LogAppLifecycleMenuItem"
                                Height="35"
                                Click="LogAppLifecycleMenuItem_OnClick"
                                Header="App launch and exit"
                                IsCheckable="True"
                                Style="{StaticResource ToggleMenuItemStyle}" />
                            <MenuItem
                                x:Name="LogErrorsAndExceptionsMenuItem"
                                Height="35"
                                Click="LogErrorsAndExceptionsMenuItem_OnClick"
                                Header="Errors and exceptions"
                                IsCheckable="True"
                                Style="{StaticResource ToggleMenuItemStyle}" />
                        </MenuItem>
                        <MenuItem
                            Padding="12,6"
                            Click="ExperimentalModDebuggingMenuItem_OnClick"
                            Header="Debug: Show all game log lines referencing the selected mod." />
                        <MenuItem
                            Padding="12,6"
                            Click="ExperimentalAllModsDebuggingMenuItem_OnClick"
                            Header="Debug: Show all game log lines found referencing any installed mod" />
                        <Separator />
                        <MenuItem
                            Padding="12,6"
                            Click="DeleteAllManagerFilesMenuItem_OnClick"
                            Header="Delete all Simple VS Manager files (Uninstall)" />
                    </MenuItem>
                </Menu>

            </Border>

            <!--  Active Game Profile Display (right side of menu bar)  -->
            <TextBlock
                x:Name="ActiveGameProfileTextBlock"
                Grid.Column="1"
                Width="310"
                Height="28"
                Margin="0,1,16,0"
                Padding="3,0,0,3"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                FlowDirection="RightToLeft"
                FontSize="15"
                Foreground="{DynamicResource Brush.Text.Primary}"
                Opacity="0.5"
                Text="Profile: Default"
                Visibility="Collapsed" />

            <!--  Notification Links (Update Available, Confirm Working Mods)  -->
            <StackPanel
                Grid.Column="1"
                Width="Auto"
                Height="Auto"
                Margin="4,0,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                Orientation="Horizontal">
                <TextBlock
                    x:Name="ManagerUpdateLinkTextBlock"
                    Margin="0,0,12,0"
                    VerticalAlignment="Center"
                    Visibility="Collapsed"><Hyperlink
                        Foreground="{DynamicResource Brush.Text.Emphasis}"
                        NavigateUri="https://mods.vintagestory.at/simplevsmanager"
                        RequestNavigate="ManagerUpdateLink_OnRequestNavigate">
                        <Run Text="Manager update available!" />
                    </Hyperlink></TextBlock>

                <TextBlock
                    x:Name="ModUsagePromptTextBlock"
                    VerticalAlignment="Center"
                    Visibility="Collapsed"><Hyperlink Click="ModUsagePromptLink_OnClick" Foreground="{DynamicResource Brush.Text.Emphasis}">
                        <Run Text="Confirm working mods!" />
                    </Hyperlink></TextBlock>
            </StackPanel>

        </Grid>

        <!--  ============================================================  -->
        <!--  MIDDLE: Main Content Area (Installed Mods, Mod Database, Modlists tabs)  -->
        <!--  ============================================================  -->
        <Grid
            x:Name="MIDDLE"
            Grid.Row="1"
            Background="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--  Discord Button (top-right corner)  -->
            <TabControl
                x:Name="MiddleTabControl"
                Background="Transparent"
                BorderThickness="0,0,0,0"
                ItemContainerStyle="{StaticResource IMM.MiddleTabItemStyle}"
                SelectionChanged="MiddleTabControl_OnSelectionChanged">

                <!--  ============================================================  -->
                <!--  TAB 1: Installed Mods Tab  -->

                <!--  ============================================================  -->
                <!--  TAB 2: Mod Database Tab (Browse and Install from ModDB)  -->

                <!--  ============================================================  -->
                <!--  TAB 3: Modlists Tab (Local and Online Modlists)  -->
                <!--  ============================================================  -->
                <TabItem
                    x:Name="MainTab"
                    Width="Auto"
                    Height="30"
                    Padding="8,6,8,6"
                    HorizontalContentAlignment="Stretch"
                    Foreground="{DynamicResource Brush.Text.Placeholder}"
                    Header="Installed mods">
                    <Border
                        Margin="8,0,8,0"
                        Background="{DynamicResource Brush.MiddleTab.Background.Selected}"
                        BorderThickness="0"
                        CornerRadius="0,8,0,0">
                        <Grid x:Name="MainGrid" Background="Transparent">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <!--  Search and Refresh Controls  -->
                            <Grid
                                x:Name="MainControls"
                                Height="48"
                                Margin="0,0,10,0"
                                VerticalAlignment="Top">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="Auto" MinWidth="229" />
                                </Grid.ColumnDefinitions>

                                <TextBox
                                    x:Name="MainSearch"
                                    Height="32"
                                    MinWidth="200"
                                    Margin="10,0,0,0"
                                    Padding="3,3,6,3"
                                    HorizontalAlignment="Left"
                                    VerticalContentAlignment="Center"
                                    ui:ControlHelper.PlaceholderText="Search installed mods"
                                    FontSize="14"
                                    Grid.IsSharedSizeScope="True"
                                    Style="{StaticResource IMM.SearchTextBoxStyle}"
                                    Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                    UseLayoutRounding="True" />
                                <Button
                                    Grid.Column="1"
                                    Width="82"
                                    Height="32"
                                    MinHeight="32"
                                    Margin="0,0,0,7"
                                    Padding="6,6,6,6"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Bottom"
                                    Background="{DynamicResource Brush.Button.Primary.Background.Normal}"
                                    BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                                    Command="{Binding RefreshModsUiCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                    Content="Refresh"
                                    ToolTip="Quickly refreshes the current view using cached data if no changes are detected on the online mod page." />
                            </Grid>
                            <Border
                                x:Name="MainBorder"
                                Grid.Row="1"
                                Margin="8,0,8,0"
                                Background="{DynamicResource Brush.InstalledMods.Background.Gradient}"
                                BorderBrush="{DynamicResource Brush.DataGrid.Background}"
                                BorderThickness="2,2,0,0"
                                CornerRadius="4"
                                SnapsToDevicePixels="True">

                                <DataGrid
                                    x:Name="ModsDataGrid"
                                    ui:ControlHelper.CornerRadius="0"
                                    AreRowDetailsFrozen="True"
                                    AutoGenerateColumns="False"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    BorderThickness="0,1,2,1"
                                    CanUserAddRows="False"
                                    CanUserDeleteRows="False"
                                    CanUserSortColumns="True"
                                    EnableColumnVirtualization="True"
                                    EnableRowVirtualization="True"
                                    FontSize="15"
                                    Foreground="{DynamicResource Brush.Text.Primary}"
                                    GridLinesVisibility="None"
                                    HeadersVisibility="Column"
                                    HorizontalGridLinesBrush="Transparent"
                                    IsReadOnly="False"
                                    IsSynchronizedWithCurrentItem="False"
                                    ItemsSource="{Binding ModsView}"
                                    MinColumnWidth="20"
                                    PreviewKeyDown="ModsDataGrid_OnPreviewKeyDown"
                                    PreviewMouseLeftButtonDown="ModsDataGrid_OnPreviewMouseLeftButtonDown"
                                    PreviewMouseWheel="ModsDataGrid_OnPreviewMouseWheel"
                                    RowBackground="{DynamicResource Brush.Button.Primary.Background.Normal}"
                                    RowHeaderWidth="0"
                                    ScrollViewer.CanContentScroll="True"
                                    ScrollViewer.IsDeferredScrollingEnabled="{Binding IsLoadingMods, FallbackValue=False}"
                                    SelectionChanged="ModsDataGrid_OnSelectionChanged"
                                    SelectionMode="Single"
                                    SelectionUnit="FullRow"
                                    Sorting="ModsDataGrid_OnSorting"
                                    UseLayoutRounding="True"
                                    VerticalGridLinesBrush="Transparent"
                                    VirtualizingPanel.IsVirtualizing="True"
                                    VirtualizingPanel.ScrollUnit="Item"
                                    VirtualizingPanel.VirtualizationMode="Recycling">
                                    <DataGrid.Resources>
                                        <Style BasedOn="{StaticResource IMM.InstalledModsScrollViewerStyle}" TargetType="{x:Type ScrollViewer}" />
                                        <Style BasedOn="{StaticResource IMM.DataGridScrollBarStyle}" TargetType="{x:Type ScrollBar}" />
                                        <Style BasedOn="{StaticResource IMM.DataGridScrollBarThumbStyle}" TargetType="{x:Type Thumb}" />
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="TextWrapping" Value="Wrap" />
                                        </Style>
                                        <Style BasedOn="{StaticResource IMM.PrimaryDataGridColumnHeaderStyle}" TargetType="{x:Type DataGridColumnHeader}" />
                                    </DataGrid.Resources>
                                    <DataGrid.Effect>
                                        <DropShadowEffect
                                            BlurRadius="6"
                                            Direction="315"
                                            Opacity="0.6"
                                            ShadowDepth="2" />
                                    </DataGrid.Effect>
                                    <DataGrid.DragIndicatorStyle>
                                        <Style />
                                    </DataGrid.DragIndicatorStyle>
                                    <DataGrid.CellStyle>
                                        <StaticResource ResourceKey="IMM.DataGridCellBaseStyle" />
                                    </DataGrid.CellStyle>
                                    <DataGrid.RowStyle>
                                        <Style BasedOn="{StaticResource IMM.ModsDataGridRowBaseStyle}" TargetType="{x:Type DataGridRow}">
                                            <EventSetter Event="UIElement.PreviewMouseLeftButtonDown" Handler="ModsDataGridRow_OnPreviewMouseLeftButtonDown" />
                                            <EventSetter Event="FrameworkElement.Loaded" Handler="ModsDataGridRow_OnLoaded" />
                                            <EventSetter Event="FrameworkElement.Unloaded" Handler="ModsDataGridRow_OnUnloaded" />
                                            <EventSetter Event="UIElement.MouseEnter" Handler="ModsDataGridRow_OnMouseEnter" />
                                            <EventSetter Event="UIElement.MouseLeave" Handler="ModsDataGridRow_OnMouseLeave" />
                                        </Style>
                                    </DataGrid.RowStyle>
                                    <DataGrid.Columns>
                                        <DataGridTemplateColumn
                                            x:Name="ActiveColumn"
                                            Width="90"
                                            MinWidth="85"
                                            Header="Active"
                                            SortMemberPath="ActiveSortOrder">
                                            <DataGridTemplateColumn.CellStyle>
                                                <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                                    <Setter Property="Padding" Value="0" />
                                                </Style>
                                            </DataGridTemplateColumn.CellStyle>
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Grid HorizontalAlignment="Center">
                                                        <ui:ToggleSwitch
                                                            Margin="12,0"
                                                            HorizontalAlignment="Center"
                                                            IsOn="{Binding IsActive, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                            OffContent="{x:Null}"
                                                            OnContent="{x:Null}"
                                                            PreviewMouseLeftButtonDown="ActiveToggle_OnPreviewMouseLeftButtonDown"
                                                            PreviewMouseLeftButtonUp="ActiveToggle_OnPreviewMouseLeftButtonUp"
                                                            PreviewMouseMove="ActiveToggle_OnPreviewMouseMove"
                                                            Toggled="ActiveToggle_OnToggled">
                                                            <ui:ToggleSwitch.Style>
                                                                <Style BasedOn="{StaticResource IMM.ToggleSwitchBaseStyle}" TargetType="{x:Type ui:ToggleSwitch}">
                                                                    <Setter Property="IsEnabled" Value="{Binding CanToggle}" />
                                                                </Style>
                                                            </ui:ToggleSwitch.Style>
                                                        </ui:ToggleSwitch>
                                                    </Grid>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTemplateColumn
                                            x:Name="IconColumn"
                                            Width="{Binding Data.IsCompactView, Source={StaticResource DataContextProxy}, Converter={StaticResource IMM.CompactViewWidthConverter}, ConverterParameter='80,40'}"
                                            MinWidth="50"
                                            Header="Icon"
                                            IsReadOnly="True">
                                            <DataGridTemplateColumn.CellStyle>
                                                <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                    <Setter Property="HorizontalContentAlignment" Value="Left" />
                                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                                    <Setter Property="Padding" Value="0,0,12,0" />
                                                </Style>
                                            </DataGridTemplateColumn.CellStyle>
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Border
                                                        Width="{Binding Data.IsCompactView, Source={StaticResource DataContextProxy}, Converter={StaticResource IMM.CompactViewWidthConverter}, ConverterParameter='80,40'}"
                                                        Height="{Binding Data.IsCompactView, Source={StaticResource DataContextProxy}, Converter={StaticResource IMM.CompactViewWidthConverter}, ConverterParameter='80,40'}"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        ToolTipService.InitialShowDelay="200"
                                                        ToolTipService.ShowDuration="60000">
                                                        <ToolTipService.ToolTip>
                                                            <TextBlock
                                                                MaxWidth="300"
                                                                FontFamily="Segoe UI"
                                                                FontSize="12"
                                                                FontWeight="Normal"
                                                                Foreground="{DynamicResource Brush.ToolTip.Text}"
                                                                Text="{Binding Tooltip}"
                                                                TextWrapping="Wrap" />
                                                        </ToolTipService.ToolTip>
                                                        <Image
                                                            Margin="0"
                                                            Source="{Binding Icon}"
                                                            Stretch="Uniform" />
                                                    </Border>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTextColumn
                                            x:Name="NameColumn"
                                            Width="220"
                                            Binding="{Binding DisplayName, Mode=OneWay}"
                                            CanUserResize="True"
                                            Header="Name"
                                            IsReadOnly="True"
                                            SortMemberPath="NameSortKey">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="{x:Type TextBlock}">
                                                    <Setter Property="FontFamily" Value="Segoe UI" />
                                                    <Setter Property="FontWeight" Value="Bold" />
                                                    <Setter Property="ToolTipService.ShowDuration" Value="60000" />
                                                    <Setter Property="ToolTipService.InitialShowDelay" Value="200" />
                                                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                    <Setter Property="VerticalAlignment" Value="Center" />
                                                    <Setter Property="TextAlignment" Value="Left" />
                                                    <Setter Property="Margin" Value="15,0,0,0" />
                                                    <Setter Property="ToolTipService.ToolTip">
                                                        <Setter.Value>
                                                            <TextBlock
                                                                MaxWidth="300"
                                                                FontFamily="Segoe UI"
                                                                FontSize="12"
                                                                FontWeight="Normal"
                                                                Foreground="{DynamicResource Brush.ToolTip.Text}"
                                                                Text="{Binding Tooltip}"
                                                                TextWrapping="Wrap" />
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                            <DataGridTextColumn.CellStyle>
                                                <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                                </Style>
                                            </DataGridTextColumn.CellStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn
                                            x:Name="VersionColumn"
                                            Width="85"
                                            MinWidth="80"
                                            Binding="{Binding VersionDisplay, Mode=OneWay}"
                                            CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                            ElementStyle="{StaticResource IMM.DataGridCenteredTextStyle}"
                                            Header="Version"
                                            IsReadOnly="True" />
                                        <DataGridTextColumn
                                            x:Name="LatestVersionColumn"
                                            Width="140"
                                            MinWidth="139"
                                            Binding="{Binding LatestDatabaseVersionDisplay, Mode=OneWay}"
                                            Header="Latest Version"
                                            IsReadOnly="True"
                                            SortMemberPath="LatestVersionSortKey">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="{x:Type TextBlock}">
                                                    <Setter Property="HorizontalAlignment" Value="Center" />
                                                    <Setter Property="VerticalAlignment" Value="Center" />
                                                    <Setter Property="Padding" Value="4,2" />
                                                    <Setter Property="Margin" Value="2" />
                                                    <Setter Property="ToolTipService.ShowDuration" Value="60000" />
                                                    <Setter Property="ToolTip">
                                                        <Setter.Value>
                                                            <ToolTip
                                                                MaxWidth="300"
                                                                MaxHeight="600"
                                                                Padding="10"
                                                                UseLayoutRounding="True">
                                                                <Border
                                                                    MaxWidth="300"
                                                                    MaxHeight="600"
                                                                    CornerRadius="6">
                                                                    <ItemsControl ItemsSource="{Binding NewerReleaseChangelogs}">
                                                                        <ItemsControl.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <StackPanel MaxWidth="300" Margin="0,0,0,12">
                                                                                    <TextBlock
                                                                                        Margin="0,0,0,4"
                                                                                        ClipToBounds="True"
                                                                                        FontWeight="Bold"
                                                                                        Foreground="{DynamicResource Brush.ToolTip.Text}"
                                                                                        Text="{Binding Version}" />
                                                                                    <TextBlock
                                                                                        MaxWidth="300"
                                                                                        ClipToBounds="True"
                                                                                        Foreground="{DynamicResource Brush.ToolTip.Text}"
                                                                                        Text="{Binding Changelog}"
                                                                                        TextWrapping="Wrap" />
                                                                                </StackPanel>
                                                                            </DataTemplate>
                                                                        </ItemsControl.ItemTemplate>
                                                                    </ItemsControl>
                                                                </Border>
                                                            </ToolTip>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <EventSetter Event="FrameworkElement.ToolTipOpening" Handler="LatestVersionTextBlock_OnToolTipOpening" />
                                                    <EventSetter Event="FrameworkElement.ToolTipClosing" Handler="LatestVersionTextBlock_OnToolTipClosing" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding ShouldHighlightLatestVersion}" Value="True">
                                                            <Setter Property="Background" Value="{DynamicResource Brush.Accent.Half}" />
                                                            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Primary}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding HasNewerReleaseChangelogs}" Value="False">
                                                            <Setter Property="ToolTip" Value="{x:Null}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                            <DataGridTextColumn.CellStyle>
                                                <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                                </Style>
                                            </DataGridTextColumn.CellStyle>
                                        </DataGridTextColumn>


                                        <DataGridTextColumn
                                            x:Name="AuthorsColumn"
                                            Width="150"
                                            Binding="{Binding AuthorsDisplay, Mode=OneWay}"
                                            Header="Authors"
                                            IsReadOnly="True">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="{x:Type TextBlock}">
                                                    <Setter Property="TextWrapping" Value="NoWrap" />
                                                    <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                                                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                    <Setter Property="VerticalAlignment" Value="Center" />
                                                    <Setter Property="TextAlignment" Value="Center" />
                                                    <Setter Property="ToolTipService.ShowDuration" Value="60000" />
                                                    <Setter Property="ToolTipService.InitialShowDelay" Value="200" />
                                                    <Setter Property="ToolTipService.ToolTip">
                                                        <Setter.Value>
                                                            <TextBlock
                                                                MaxWidth="300"
                                                                FontFamily="Segoe UI"
                                                                FontSize="12"
                                                                Foreground="{DynamicResource Brush.ToolTip.Text}"
                                                                Text="{Binding AuthorsDisplay}"
                                                                TextWrapping="Wrap" />
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                            <DataGridTextColumn.CellStyle>
                                                <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                                </Style>
                                            </DataGridTextColumn.CellStyle>
                                        </DataGridTextColumn>
                                        <DataGridTemplateColumn
                                            x:Name="TagsColumn"
                                            Width="280"
                                            MinWidth="180"
                                            CanUserSort="False"
                                            Header="Tags"
                                            IsReadOnly="True">
                                            <DataGridTemplateColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <Grid Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type DataGridColumnHeader}}}" Background="Transparent">
                                                        <ToggleButton
                                                            x:Name="TagsHeaderToggle"
                                                            Content="{Binding DataContext.TagsColumnHeader, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                                            Style="{StaticResource IMM.TagHeaderToggleButtonStyle}" />
                                                        <Popup
                                                            AllowsTransparency="True"
                                                            Focusable="False"
                                                            IsOpen="{Binding IsChecked, ElementName=TagsHeaderToggle, Mode=TwoWay}"
                                                            Placement="Bottom"
                                                            PlacementTarget="{Binding ElementName=TagsHeaderToggle}"
                                                            StaysOpen="True">
                                                            <Border
                                                                MinWidth="140"
                                                                Padding="8"
                                                                Background="{DynamicResource Brush.Panel.Primary.Background.Solid}"
                                                                BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                                                                BorderThickness="1"
                                                                CornerRadius="6">
                                                                <ScrollViewer
                                                                    MaxHeight="360"
                                                                    Margin="0,4,0,0"
                                                                    HorizontalScrollBarVisibility="Hidden"
                                                                    OverridesDefaultStyle="True"
                                                                    Style="{StaticResource IMM.TagsScrollViewerStyle}"
                                                                    VerticalScrollBarVisibility="Hidden">
                                                                    <ItemsControl ItemsPanel="{StaticResource IMM.TagFilterItemsPanelTemplate}" ItemsSource="{Binding DataContext.InstalledTagFilters, RelativeSource={RelativeSource AncestorType={x:Type Window}}}">
                                                                        <ItemsControl.ItemTemplate>
                                                                            <DataTemplate DataType="{x:Type viewModels:TagFilterOptionViewModel}">
                                                                                <ToggleButton
                                                                                    Content="{Binding Name}"
                                                                                    IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                                                                    Style="{StaticResource IMM.TagFilterToggleButtonStyle}" />
                                                                            </DataTemplate>
                                                                        </ItemsControl.ItemTemplate>
                                                                    </ItemsControl>
                                                                </ScrollViewer>
                                                            </Border>
                                                        </Popup>
                                                    </Grid>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.HeaderTemplate>
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Grid>
                                                        <Border
                                                            x:Name="TagsContainer"
                                                            MaxHeight="{StaticResource IMM.TagRowMaxHeight}"
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Center"
                                                            ClipToBounds="True">
                                                            <ItemsControl
                                                                x:Name="TagsItemsControl"
                                                                Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type DataGridCell}}}"
                                                                HorizontalAlignment="Left"
                                                                ItemTemplate="{StaticResource IMM.TagBadgeTemplate}"
                                                                ItemsPanel="{StaticResource IMM.TagItemsPanelTemplate}"
                                                                ItemsSource="{Binding DatabaseTags}" />
                                                        </Border>
                                                        <TextBlock
                                                            x:Name="NoTagsText"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Text=""
                                                            Visibility="Collapsed" />
                                                    </Grid>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding DatabaseTags.Count}" Value="0">
                                                            <Setter TargetName="TagsContainer" Property="Visibility" Value="Collapsed" />
                                                            <Setter TargetName="NoTagsText" Property="Visibility" Value="Visible" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding DataContext.IsCompactView, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Value="True">
                                                            <Setter TargetName="TagsContainer" Property="MaxHeight" Value="{StaticResource IMM.TagRowCompactMaxHeight}" />
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                            <DataGridTemplateColumn.CellStyle>
                                                <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                                </Style>
                                            </DataGridTemplateColumn.CellStyle>
                                        </DataGridTemplateColumn>
                                        <DataGridTemplateColumn
                                            x:Name="StatusColumn"
                                            Width="80"
                                            Header="Status"
                                            IsReadOnly="True"
                                            SortMemberPath="StatusSortOrder">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                                        <Viewbox
                                                            x:Name="StatusIconViewbox"
                                                            Width="32"
                                                            Height="32">
                                                            <Grid Width="32" Height="32">
                                                                <Image
                                                                    x:Name="ErrorIcon"
                                                                    Width="32"
                                                                    Height="32"
                                                                    Source="/error.png"
                                                                    Stretch="Uniform"
                                                                    Visibility="Collapsed" />
                                                                <Image
                                                                    x:Name="WarningIcon"
                                                                    Width="32"
                                                                    Height="32"
                                                                    Source="/warning.png"
                                                                    Stretch="Uniform"
                                                                    Visibility="Collapsed" />
                                                            </Grid>
                                                        </Viewbox>
                                                    </Grid>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding DataContext.IsCompactView, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Value="True">
                                                            <Setter TargetName="StatusIconViewbox" Property="Width" Value="22.5" />
                                                            <Setter TargetName="StatusIconViewbox" Property="Height" Value="22.5" />
                                                            <Setter TargetName="ErrorIcon" Property="Width" Value="22.5" />
                                                            <Setter TargetName="ErrorIcon" Property="Height" Value="22.5" />
                                                            <Setter TargetName="WarningIcon" Property="Width" Value="22.5" />
                                                            <Setter TargetName="WarningIcon" Property="Height" Value="22.5" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding StatusText}" Value="Error">
                                                            <Setter TargetName="ErrorIcon" Property="Visibility" Value="Visible" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding StatusText}" Value="Warning">
                                                            <Setter TargetName="WarningIcon" Property="Visibility" Value="Visible" />
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                            <DataGridTemplateColumn.CellStyle>
                                                <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                    <Setter Property="ToolTip" Value="{Binding StatusDetails}" />
                                                </Style>
                                            </DataGridTemplateColumn.CellStyle>
                                        </DataGridTemplateColumn>
                                        <DataGridTemplateColumn
                                            x:Name="UserReportsColumn"
                                            Width="150"
                                            Header="User Reports"
                                            IsReadOnly="True">
                                            <DataGridTemplateColumn.CellStyle>
                                                <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                                </Style>
                                            </DataGridTemplateColumn.CellStyle>
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Button
                                                        HorizontalAlignment="Stretch"
                                                        Click="UserReportsButton_OnClick"
                                                        ClipToBounds="True"
                                                        Content="{Binding UserReportDisplay}"
                                                        IsEnabled="{Binding CanSubmitUserReport}"
                                                        ToolTip="{Binding UserReportTooltip}">
                                                        <Button.Style>
                                                            <Style BasedOn="{StaticResource IMM.UserReportButtonStyle}" TargetType="{x:Type Button}">
                                                                <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                                <Setter Property="Padding" Value="4,0" />
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding IsUserReportLoading}" Value="True">
                                                                        <Setter Property="Cursor" Value="Wait" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding UserReportHasError}" Value="True">
                                                                        <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Emphasis}" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTextColumn
                                            x:Name="SideColumn"
                                            Width="90"
                                            MinWidth="80"
                                            Binding="{Binding SideDisplay, Mode=OneWay}"
                                            CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                            ElementStyle="{StaticResource IMM.DataGridCenteredTextStyle}"
                                            Header="Side"
                                            IsReadOnly="True"
                                            SortMemberPath="SideSortValue" />
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Border>
                            <Image
                                Grid.Row="1"
                                Width="128"
                                Height="128"
                                Margin="0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                IsHitTestVisible="False"
                                Opacity="1"
                                Source="/Resources/manager-icon.png">
                                <Image.Style>
                                    <Style TargetType="{x:Type Image}">
                                        <Setter Property="Visibility" Value="Hidden" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding TotalMods}" Value="0">
                                                <Setter Property="Visibility" Value="Visible" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Image.Style>
                            </Image>
                        </Grid>
                    </Border>
                </TabItem>

                <!--  ============================================================  -->
                <TabItem
                    x:Name="DatabaseTab"
                    Width="Auto"
                    Height="30"
                    Padding="8,6,8,6"
                    Header="Mod Database">
                    <Border
                        Margin="8,0,8,0"
                        Background="{DynamicResource Brush.MiddleTab.Background.Selected}"
                        CornerRadius="0,8,0,0">
                        <views:ModBrowserView
                            x:Name="ModBrowserView"
                            Background="Transparent"
                            ClipToBounds="True" />
                    </Border>
                </TabItem>

                <!--  ============================================================  -->
                <TabItem
                    x:Name="ModlistTab"
                    Height="30"
                    Padding="27,6,27,6"
                    HorizontalContentAlignment="Stretch"
                    VerticalContentAlignment="Stretch"
                    BorderBrush="#00000000"
                    Header="Modlists">
                    <Border
                        Margin="8,0,8,0"
                        Background="{DynamicResource Brush.MiddleTab.Background.Selected}"
                        CornerRadius="0,8,0,0">
                        <Grid x:Name="ModlistInnerTab" ClipToBounds="True">
                            <TabControl
                                x:Name="ModlistsTabControl"
                                Padding="0,0,0,0"
                                Background="Transparent"
                                BorderThickness="0"
                                ItemContainerStyle="{DynamicResource IMM.MiddleTabItemStyle}"
                                Loaded="ModlistsTabControl_OnLoaded"
                                SelectionChanged="ModlistsTabControl_OnSelectionChanged">

                                <!--  Local Modlists Sub-Tab  -->
                                <TabItem
                                    x:Name="LocalModlistsTabItem"
                                    Padding="14,4,14,4"
                                    VerticalAlignment="Center"
                                    HorizontalContentAlignment="Stretch"
                                    BorderBrush="#00000000"
                                    Header="Local"
                                    Style="{DynamicResource IMM.InnerModlistsTabItemStyle}"
                                    UseLayoutRounding="True">
                                    <Grid x:Name="LocalModlistsGrid">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>

                                        <DataGrid
                                            x:Name="LocalModlistsDataGrid"
                                            Margin="8,0,8,0"
                                            ui:ControlHelper.CornerRadius="0"
                                            AutoGenerateColumns="False"
                                            Background="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                                            BorderBrush="{DynamicResource Brush.MiddleTab.ModTab.Selected}"
                                            BorderThickness="5,5,5,5"
                                            CanUserAddRows="False"
                                            CanUserDeleteRows="False"
                                            FontSize="15"
                                            Foreground="{DynamicResource Brush.Text.Primary}"
                                            GridLinesVisibility="None"
                                            HeadersVisibility="Column"
                                            HorizontalGridLinesBrush="Transparent"
                                            IsReadOnly="True"
                                            ItemsSource="{Binding LocalModlistsView}"
                                            RowBackground="{DynamicResource Brush.Panel.Primary.Background.Solid}"
                                            RowHeaderWidth="0"
                                            SelectionChanged="LocalModlistsDataGrid_OnSelectionChanged"
                                            SelectionMode="Extended"
                                            SelectionUnit="FullRow"
                                            VerticalGridLinesBrush="Transparent">
                                            <DataGrid.Resources>
                                                <Style BasedOn="{StaticResource IMM.InstalledModsScrollViewerStyle}" TargetType="{x:Type ScrollViewer}" />
                                                <Style BasedOn="{StaticResource IMM.DataGridScrollBarStyle}" TargetType="{x:Type ScrollBar}" />
                                                <Style BasedOn="{StaticResource IMM.DataGridScrollBarThumbStyle}" TargetType="{x:Type Thumb}" />
                                                <Style TargetType="{x:Type TextBlock}">
                                                    <Setter Property="TextWrapping" Value="Wrap" />
                                                </Style>
                                                <Style BasedOn="{StaticResource IMM.PrimaryDataGridColumnHeaderStyle}" TargetType="{x:Type DataGridColumnHeader}" />
                                            </DataGrid.Resources>
                                            <DataGrid.CellStyle>
                                                <StaticResource ResourceKey="IMM.DataGridCellBaseStyle" />
                                            </DataGrid.CellStyle>

                                            <DataGrid.RowHeaderStyle>
                                                <Style />
                                            </DataGrid.RowHeaderStyle>
                                            <DataGrid.RowStyle>
                                                <StaticResource ResourceKey="IMM.ModlistsDataGridRowStyle" />
                                            </DataGrid.RowStyle>
                                            <DataGrid.Columns>
                                                <DataGridTextColumn
                                                    Width="260"
                                                    MinWidth="200"
                                                    Binding="{Binding DisplayName}"
                                                    Header="Name"
                                                    IsReadOnly="True">
                                                    <DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="{x:Type TextBlock}">
                                                            <Setter Property="VerticalAlignment" Value="Center" />
                                                            <Setter Property="ToolTipService.ShowDuration" Value="60000" />
                                                            <Setter Property="ToolTip" Value="{Binding DisplayName}" />
                                                        </Style>
                                                    </DataGridTextColumn.ElementStyle>
                                                    <DataGridTextColumn.CellStyle>
                                                        <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                            <Setter Property="VerticalContentAlignment" Value="Center" />
                                                            <Setter Property="Margin" Value="10,0,0,0" />
                                                            <Setter Property="FontWeight" Value="Bold" />
                                                        </Style>
                                                    </DataGridTextColumn.CellStyle>
                                                </DataGridTextColumn>
                                                <DataGridTextColumn
                                                    Width="220"
                                                    MinWidth="180"
                                                    Binding="{Binding UploaderDisplay}"
                                                    CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                                    ElementStyle="{StaticResource IMM.DataGridCenteredTextStyle}"
                                                    Header="Uploader"
                                                    IsReadOnly="True" />
                                                <DataGridTextColumn
                                                    Width="120"
                                                    Binding="{Binding Version, FallbackValue=, TargetNullValue=}"
                                                    CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                                    ElementStyle="{StaticResource IMM.DataGridCenteredTextStyle}"
                                                    Header="Version"
                                                    IsReadOnly="True" />
                                                <DataGridTextColumn
                                                    Width="120"
                                                    Binding="{Binding GameVersionDisplay}"
                                                    CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                                    ElementStyle="{StaticResource IMM.DataGridCenteredTextStyle}"
                                                    Header="VS Version"
                                                    IsReadOnly="True" />
                                                <DataGridTextColumn
                                                    Width="180"
                                                    Binding="{Binding LastModifiedDisplay}"
                                                    Header="Last Modified"
                                                    IsReadOnly="True"
                                                    SortMemberPath="LastModified">
                                                    <DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="{x:Type TextBlock}">
                                                            <Setter Property="HorizontalAlignment" Value="Center" />
                                                            <Setter Property="VerticalAlignment" Value="Center" />
                                                            <Setter Property="TextAlignment" Value="Center" />
                                                            <Setter Property="ToolTipService.ShowDuration" Value="60000" />
                                                            <Setter Property="ToolTip" Value="{Binding LastModifiedDisplay}" />
                                                        </Style>
                                                    </DataGridTextColumn.ElementStyle>
                                                    <DataGridTextColumn.CellStyle>
                                                        <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                                            <Setter Property="VerticalContentAlignment" Value="Center" />
                                                        </Style>
                                                    </DataGridTextColumn.CellStyle>
                                                </DataGridTextColumn>
                                                <DataGridTemplateColumn
                                                    Width="200"
                                                    MinWidth="180"
                                                    CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                                    Header="Mods"
                                                    IsReadOnly="True">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Grid>
                                                                <ComboBox
                                                                    x:Name="LocalModsComboBox"
                                                                    IsEditable="True"
                                                                    IsReadOnly="True"
                                                                    ItemsSource="{Binding Mods, Mode=OneWay}"
                                                                    MaxDropDownHeight="240"
                                                                    SelectedIndex="-1" />
                                                                <TextBlock
                                                                    HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"
                                                                    Foreground="{DynamicResource Brush.Text.Primary}"
                                                                    IsHitTestVisible="False"
                                                                    Text="{Binding ModsSummary, Mode=OneWay}">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="{x:Type TextBlock}">
                                                                            <Setter Property="Visibility" Value="Visible" />
                                                                            <Setter Property="Margin" Value="8,0,24,0" />
                                                                            <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                                            <Setter Property="TextAlignment" Value="Center" />
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding IsDropDownOpen, ElementName=LocalModsComboBox}" Value="True">
                                                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                            </Grid>
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>
                                            </DataGrid.Columns>
                                        </DataGrid>

                                        <TextBlock
                                            x:Name="PlaceholderText"
                                            Grid.Row="0"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            FontSize="16"
                                            Foreground="{DynamicResource Brush.Text.Primary}"
                                            Text="No local modlists found."
                                            TextAlignment="Center"
                                            TextWrapping="Wrap">
                                            <TextBlock.Style>
                                                <Style TargetType="{x:Type TextBlock}">
                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding HasLocalModlists}" Value="False">
                                                            <Setter Property="Visibility" Value="Visible" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>

                                        <Border
                                            x:Name="LocalModlistsControlsBorder"
                                            Grid.Row="1"
                                            Margin="8,0,8,8"
                                            Background="{DynamicResource Brush.MiddleTab.ModTab.Selected}">

                                            <Grid x:Name="LocalModlistsControls" Margin="0,0,0,8">
                                                <Button
                                                    x:Name="SaveLocalModlistButton"
                                                    Width="185"
                                                    Height="32"
                                                    MinWidth="165"
                                                    Margin="10,10,0,0"
                                                    Padding="12,0,12,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Click="SaveLocalModlistButton_OnClick"
                                                    Content="Save Modlist (Local)" />
                                                <Button
                                                    x:Name="InstallLocalModlistButton"
                                                    Width="185"
                                                    Height="32"
                                                    MinWidth="165"
                                                    Margin="10,47,0,0"
                                                    Padding="12,0,12,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Click="InstallLocalModlistButton_OnClick"
                                                    Content="Install Selected Modlist"
                                                    IsEnabled="False" />
                                                <Button
                                                    x:Name="DeleteLocalModlistsButton"
                                                    Width="185"
                                                    Height="32"
                                                    MinWidth="165"
                                                    Margin="10,121,0,0"
                                                    Padding="12,0,12,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Click="DeleteLocalModlistsButton_OnClick"
                                                    Content="Delete"
                                                    IsEnabled="False" />
                                                <Button
                                                    x:Name="ModifyLocalModlistButton"
                                                    Width="185"
                                                    Height="32"
                                                    MinWidth="165"
                                                    Margin="10,84,0,0"
                                                    Padding="12,0,12,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Click="ModifyLocalModlistButton_OnClick"
                                                    Content="Modify"
                                                    IsEnabled="False" />
                                                <Border
                                                    Height="142"
                                                    Margin="200,10,10,0"
                                                    VerticalAlignment="Top"
                                                    Background="Transparent"
                                                    BorderBrush="{DynamicResource Brush.SunkenSurface.Bevel.Light}"
                                                    BorderThickness="0,0,2,2"
                                                    CornerRadius="5"
                                                    SnapsToDevicePixels="True">
                                                    <Border
                                                        Padding="10"
                                                        Background="{DynamicResource Brush.ModCard.Background.Active}"
                                                        BorderBrush="{DynamicResource Brush.SunkenSurface.Bevel.Dark}"
                                                        BorderThickness="2,2,0,0"
                                                        ClipToBounds="True"
                                                        CornerRadius="5"
                                                        SnapsToDevicePixels="True">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="*" />
                                                            </Grid.RowDefinitions>
                                                            <TextBlock
                                                                x:Name="SelectedLocalModlistTitle"
                                                                Grid.Row="0"
                                                                Grid.RowSpan="2"
                                                                Margin="0,0,0,66"
                                                                FontWeight="Bold"
                                                                Foreground="{DynamicResource Brush.Text.Primary}"
                                                                Text=""
                                                                TextWrapping="Wrap" />
                                                            <TextBlock
                                                                x:Name="SelectedLocalModlistDescription"
                                                                Grid.Row="1"
                                                                Margin="0,16,0,0"
                                                                Foreground="{DynamicResource Brush.Text.Primary}"
                                                                Text=""
                                                                TextWrapping="Wrap" />
                                                        </Grid>
                                                    </Border>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </Grid>
                                </TabItem>

                                <!--  Online Modlists Sub-Tab  -->
                                <TabItem
                                    x:Name="OnlineModlistsTabItem"
                                    Padding="10,4,10,4"
                                    Header="Online"
                                    Style="{DynamicResource IMM.InnerModlistsTabItemStyle}"
                                    UseLayoutRounding="True">
                                    <Grid x:Name="OnlineModlistsGrid">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>

                                        <DataGrid
                                            x:Name="CloudModlistsDataGrid"
                                            Margin="8,0,8,0"
                                            ui:ControlHelper.CornerRadius="0"
                                            AutoGenerateColumns="False"
                                            Background="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                                            BorderBrush="{DynamicResource Brush.MiddleTab.ModTab.Selected}"
                                            BorderThickness="5,5,5,5"
                                            CanUserAddRows="False"
                                            CanUserDeleteRows="False"
                                            FontSize="15"
                                            Foreground="{DynamicResource Brush.Text.Primary}"
                                            GridLinesVisibility="None"
                                            HeadersVisibility="Column"
                                            HorizontalGridLinesBrush="Transparent"
                                            IsEnabled="{Binding CanAccessCloudModlists}"
                                            IsReadOnly="True"
                                            ItemsSource="{Binding CloudModlistsView}"
                                            RowBackground="{DynamicResource Brush.Panel.Primary.Background.Solid}"
                                            RowHeaderWidth="0"
                                            SelectionChanged="CloudModlistsDataGrid_OnSelectionChanged"
                                            SelectionMode="Single"
                                            SelectionUnit="FullRow"
                                            VerticalGridLinesBrush="Transparent">
                                            <DataGrid.Resources>
                                                <Style BasedOn="{StaticResource IMM.InstalledModsScrollViewerStyle}" TargetType="{x:Type ScrollViewer}" />
                                                <Style BasedOn="{StaticResource IMM.DataGridScrollBarStyle}" TargetType="{x:Type ScrollBar}" />
                                                <Style BasedOn="{StaticResource IMM.DataGridScrollBarThumbStyle}" TargetType="{x:Type Thumb}" />
                                                <Style TargetType="{x:Type TextBlock}">
                                                    <Setter Property="TextWrapping" Value="Wrap" />
                                                </Style>
                                                <Style BasedOn="{StaticResource IMM.PrimaryDataGridColumnHeaderStyle}" TargetType="{x:Type DataGridColumnHeader}" />
                                            </DataGrid.Resources>
                                            <DataGrid.CellStyle>
                                                <StaticResource ResourceKey="IMM.DataGridCellBaseStyle" />
                                            </DataGrid.CellStyle>

                                            <DataGrid.RowHeaderStyle>
                                                <Style />
                                            </DataGrid.RowHeaderStyle>
                                            <DataGrid.RowStyle>
                                                <StaticResource ResourceKey="IMM.ModlistsDataGridRowStyle" />
                                            </DataGrid.RowStyle>
                                            <DataGrid.Columns>
                                                <DataGridTextColumn
                                                    Width="260"
                                                    MinWidth="200"
                                                    Binding="{Binding DisplayName}"
                                                    Header="Name"
                                                    IsReadOnly="True">
                                                    <DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="{x:Type TextBlock}">
                                                            <Setter Property="VerticalAlignment" Value="Center" />
                                                            <Setter Property="ToolTipService.ShowDuration" Value="60000" />
                                                            <Setter Property="ToolTip" Value="{Binding DisplayName}" />
                                                        </Style>
                                                    </DataGridTextColumn.ElementStyle>
                                                    <DataGridTextColumn.CellStyle>
                                                        <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                            <Setter Property="VerticalContentAlignment" Value="Center" />
                                                            <Setter Property="Margin" Value="10,0,0,0" />
                                                            <Setter Property="FontWeight" Value="Bold" />
                                                        </Style>
                                                    </DataGridTextColumn.CellStyle>
                                                </DataGridTextColumn>
                                                <DataGridTextColumn
                                                    Width="220"
                                                    MinWidth="180"
                                                    Binding="{Binding Uploader}"
                                                    CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                                    ElementStyle="{StaticResource IMM.DataGridCenteredTextStyle}"
                                                    Header="Uploader"
                                                    IsReadOnly="True" />
                                                <DataGridTextColumn
                                                    Width="120"
                                                    Binding="{Binding Version, FallbackValue=, TargetNullValue=}"
                                                    CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                                    ElementStyle="{StaticResource IMM.DataGridCenteredTextStyle}"
                                                    Header="Version"
                                                    IsReadOnly="True" />
                                                <DataGridTextColumn
                                                    Width="120"
                                                    Binding="{Binding GameVersionDisplay}"
                                                    CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                                    ElementStyle="{StaticResource IMM.DataGridCenteredTextStyle}"
                                                    Header="VS Version"
                                                    IsReadOnly="True" />
                                                <DataGridTextColumn
                                                    Width="180"
                                                    Binding="{Binding DateAddedDisplay}"
                                                    Header="Date Added"
                                                    IsReadOnly="True"
                                                    SortMemberPath="DateAdded">
                                                    <DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="{x:Type TextBlock}">
                                                            <Setter Property="HorizontalAlignment" Value="Center" />
                                                            <Setter Property="VerticalAlignment" Value="Center" />
                                                            <Setter Property="TextAlignment" Value="Center" />
                                                            <Setter Property="ToolTipService.ShowDuration" Value="60000" />
                                                            <Setter Property="ToolTip" Value="{Binding DateAddedDisplay}" />
                                                        </Style>
                                                    </DataGridTextColumn.ElementStyle>
                                                    <DataGridTextColumn.CellStyle>
                                                        <Style BasedOn="{StaticResource IMM.DataGridCellBaseStyle}" TargetType="{x:Type DataGridCell}">
                                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                                            <Setter Property="VerticalContentAlignment" Value="Center" />
                                                        </Style>
                                                    </DataGridTextColumn.CellStyle>
                                                </DataGridTextColumn>
                                                <DataGridTemplateColumn
                                                    Width="200"
                                                    MinWidth="180"
                                                    CellStyle="{StaticResource IMM.DataGridCenteredCellStyle}"
                                                    Header="Mods"
                                                    IsReadOnly="True">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Grid>
                                                                <ComboBox
                                                                    x:Name="ModsComboBox"
                                                                    IsEditable="True"
                                                                    IsReadOnly="True"
                                                                    ItemsSource="{Binding Mods, Mode=OneWay}"
                                                                    MaxDropDownHeight="240"
                                                                    SelectedIndex="-1" />
                                                                <TextBlock
                                                                    HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"
                                                                    Foreground="{DynamicResource Brush.Text.Primary}"
                                                                    IsHitTestVisible="False"
                                                                    Text="{Binding ModsSummary, Mode=OneWay}">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="{x:Type TextBlock}">
                                                                            <Setter Property="Visibility" Value="Visible" />
                                                                            <Setter Property="Margin" Value="8,0,24,0" />
                                                                            <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                                            <Setter Property="TextAlignment" Value="Center" />
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding IsDropDownOpen, ElementName=ModsComboBox}" Value="True">
                                                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                            </Grid>
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>
                                            </DataGrid.Columns>
                                        </DataGrid>

                                        <Border
                                            x:Name="OnlineModlistsButtonsBorder"
                                            Grid.Row="1"
                                            Margin="8,0,8,8"
                                            Background="{DynamicResource Brush.MiddleTab.ModTab.Selected}">

                                            <Grid
                                                x:Name="OnlineModlistsButtons"
                                                Margin="0,0,0,8"
                                                IsEnabled="{Binding CanAccessCloudModlists}">

                                                <Button
                                                    x:Name="InstallCloudModlistButton"
                                                    Width="185"
                                                    Height="32"
                                                    MinWidth="185"
                                                    Margin="10,47,0,0"
                                                    Padding="12,0,12,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Click="InstallCloudModlistButton_OnClick"
                                                    Content="Install Selected Modlist"
                                                    IsEnabled="False"
                                                    Visibility="Visible" />
                                                <Button
                                                    x:Name="SaveCloudModlistButton"
                                                    Width="185"
                                                    Height="32"
                                                    MinWidth="165"
                                                    Margin="10,121,0,0"
                                                    Padding="12,0,12,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Click="SaveCloudModlistButton_OnClick"
                                                    Content="Save Modlist (Online)" />
                                                <Button
                                                    x:Name="ModifyCloudModlistsButton"
                                                    Width="185"
                                                    Height="32"
                                                    MinWidth="165"
                                                    Margin="10,84,0,0"
                                                    Padding="12,0,12,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Click="ModifyCloudModlistsButton_OnClick"
                                                    Content="Modify Modlists" />
                                                <Button
                                                    x:Name="RefreshCloudModlistsButton"
                                                    Grid.Column="1"
                                                    Width="185"
                                                    Height="32"
                                                    MinWidth="100"
                                                    Margin="10,10,0,0"
                                                    Padding="12,0,12,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Click="RefreshCloudModlistsButton_OnClick"
                                                    Content="Refresh" />
                                                <Border
                                                    x:Name="OnlineModlistsDescriptions"
                                                    Height="142"
                                                    Margin="200,10,10,0"
                                                    VerticalAlignment="Top"
                                                    Background="Transparent"
                                                    BorderBrush="{DynamicResource Brush.SunkenSurface.Bevel.Light}"
                                                    BorderThickness="0,0,2,2"
                                                    CornerRadius="5"
                                                    SnapsToDevicePixels="True">
                                                    <Border
                                                        Padding="10"
                                                        Background="{DynamicResource Brush.ModCard.Background.Active}"
                                                        BorderBrush="{DynamicResource Brush.SunkenSurface.Bevel.Dark}"
                                                        BorderThickness="2,2,0,0"
                                                        ClipToBounds="True"
                                                        CornerRadius="5"
                                                        SnapsToDevicePixels="True">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="*" />
                                                            </Grid.RowDefinitions>
                                                            <TextBlock
                                                                x:Name="SelectedModlistTitle"
                                                                Grid.Row="0"
                                                                FontWeight="Bold"
                                                                Foreground="{DynamicResource Brush.Text.Primary}"
                                                                Text=""
                                                                TextWrapping="Wrap" />
                                                            <ScrollViewer
                                                                Grid.Row="1"
                                                                Margin="0,8,0,0"
                                                                Padding="0,0,4,0"
                                                                CanContentScroll="False"
                                                                HorizontalScrollBarVisibility="Disabled"
                                                                PanningMode="VerticalOnly"
                                                                VerticalScrollBarVisibility="Auto">
                                                                <ScrollViewer.Resources>
                                                                    <Style BasedOn="{StaticResource IMM.SlimScrollBarStyle}" TargetType="{x:Type ScrollBar}" />
                                                                </ScrollViewer.Resources>
                                                                <TextBlock
                                                                    x:Name="SelectedModlistDescription"
                                                                    Foreground="{DynamicResource Brush.Text.Primary}"
                                                                    Text=""
                                                                    TextWrapping="Wrap" />
                                                            </ScrollViewer>
                                                        </Grid>
                                                    </Border>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </Grid>
                                </TabItem>
                            </TabControl>
                        </Grid>
                    </Border>
                </TabItem>
            </TabControl>

            <!--  Discord Button (top-right corner)  -->
            <Button
                x:Name="DiscordButton"
                Width="48"
                Height="48"
                Margin="0,-6,5,0"
                Padding="0"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                BorderThickness="0"
                Click="DiscordButton_OnClick"
                ToolTip="Join the Simple VS Manager Discord">
                <Button.Template>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Image
                                    x:Name="DiscordIcon"
                                    Width="26"
                                    Height="26"
                                    Source="/Resources/Discord.png"
                                    Stretch="Uniform" />
                                <Rectangle
                                    x:Name="DiscordNormalOverlay"
                                    Width="{Binding ActualWidth, ElementName=DiscordIcon}"
                                    Height="{Binding ActualHeight, ElementName=DiscordIcon}"
                                    Fill="{DynamicResource Brush.ComboBox.Background.Hover}">
                                    <Rectangle.OpacityMask>
                                        <ImageBrush ImageSource="/Resources/Discord.png" Stretch="Uniform" />
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <Rectangle
                                    x:Name="DiscordHoverOverlay"
                                    Width="{Binding ActualWidth, ElementName=DiscordIcon}"
                                    Height="{Binding ActualHeight, ElementName=DiscordIcon}"
                                    Fill="#5865F2"
                                    Visibility="Collapsed">
                                    <Rectangle.OpacityMask>
                                        <ImageBrush ImageSource="/Resources/Discord.png" Stretch="Uniform" />
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                            </Grid>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="DiscordHoverOverlay" Property="Visibility" Value="Visible" />
                                <Setter TargetName="DiscordNormalOverlay" Property="Visibility" Value="Collapsed" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Grid>

        <!--  ============================================================  -->
        <!--  BOTTOM: Status Bar and Action Buttons  -->
        <!--  ============================================================  -->
        <Grid
            x:Name="BOTTOM"
            Grid.Row="2"
            Background="{DynamicResource Brush.MiddleTab.Background.Selected}">
            <Grid.Effect>
                <DropShadowEffect
                    BlurRadius="15"
                    Direction="90"
                    Opacity="0.5"
                    ShadowDepth="5" />
            </Grid.Effect>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Rectangle
                Grid.ColumnSpan="2"
                Margin="0,91,0,-5"
                Fill="{DynamicResource Brush.MiddleTab.Background.Selected}"
                RadiusX="4.806"
                RadiusY="4.806" />

            <!--  Status Message and Loading Progress  -->
            <Border
                x:Name="StatusTextBorder"
                Width="376"
                Height="80"
                Margin="8,8,0,8"
                HorizontalAlignment="Left"
                Background="{DynamicResource Brush.SearchBox.Background}"
                BorderBrush="{DynamicResource Brush.SunkenSurface.Bevel.Dark}"
                BorderThickness="0,0,2,2"
                CornerRadius="3"
                SnapsToDevicePixels="True">
                <Grid>
                    <!--  Regular status message  -->
                    <TextBlock
                        Grid.Column="0"
                        Padding="4,2,4,2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Text="{Binding StatusMessage}"
                        TextWrapping="Wrap">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Primary}" />
                                <Setter Property="Visibility" Value="Visible" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding HasStatusMessage}" Value="True">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsErrorStatus}" Value="True">
                                        <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Emphasis}" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsLoadingMods}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsModDetailsProgressVisible}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsModlistInstallInProgress, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <!--  Loading progress display  -->
                    <StackPanel Margin="8,4" VerticalAlignment="Center">
                        <StackPanel.Style>
                            <Style TargetType="{x:Type StackPanel}">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsLoadingMods}" Value="True">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsModlistInstallInProgress, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <TextBlock
                            Margin="0,0,0,4"
                            HorizontalAlignment="Center"
                            FontSize="12"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource Brush.Text.Primary}"
                            Text="{Binding LoadingStatusText}" />

                        <ProgressBar
                            Height="8"
                            Background="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                            Foreground="{DynamicResource Brush.Accent.Primary}"
                            Maximum="100"
                            Minimum="0"
                            Value="{Binding LoadingProgress, Mode=OneWay}" />
                    </StackPanel>

                    <!--  Mod details loading progress display  -->
                    <StackPanel Margin="8,4" VerticalAlignment="Center">
                        <StackPanel.Style>
                            <Style TargetType="{x:Type StackPanel}">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsModDetailsProgressVisible}" Value="True">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsLoadingMods}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsModlistInstallInProgress, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <TextBlock
                            Margin="0,0,0,4"
                            HorizontalAlignment="Center"
                            FontSize="12"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource Brush.Text.Primary}"
                            Text="{Binding ModDetailsStatusText}" />

                        <ProgressBar
                            Height="8"
                            Background="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                            Foreground="{DynamicResource Brush.Accent.Primary}"
                            Maximum="100"
                            Minimum="0"
                            Value="{Binding ModDetailsProgress, Mode=OneWay}" />
                    </StackPanel>
                </Grid>
            </Border>

            <!--  Action Buttons (Update All, Open Folders, Launch Game)  -->
            <StackPanel
                Grid.Column="1"
                Width="280"
                Height="32"
                Margin="0,0,10,10"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Orientation="Horizontal">
                <Button
                    x:Name="UpdateAllButton"
                    MinWidth="125"
                    MinHeight="32"
                    Margin="0,0,4,0"
                    Padding="6,6,6,6"
                    Background="{DynamicResource Brush.Button.Primary.Background.Normal}"
                    BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                    Click="UpdateAllModsMenuItem_OnClick"
                    Content="{Binding DataContext.UpdateAllButtonLabel, FallbackValue=Manage Updates, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
                <Button
                    x:Name="LaunchGameButton"
                    MinWidth="150"
                    MinHeight="32"
                    Background="{DynamicResource Brush.Button.Primary.Background.Normal}"
                    BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                    Click="LaunchGameButton_OnClick"
                    Content="Launch Vintage Story"
                    FontWeight="Bold" />
            </StackPanel>

            <!--  Loading Progress Ring  -->
            <ui:ProgressRing
                Grid.Column="1"
                Width="32"
                Margin="0,10,10,54"
                HorizontalAlignment="Right"
                VerticalAlignment="Stretch"
                Foreground="{DynamicResource Brush.Accent.Primary}"
                IsActive="{Binding IsBusy}">
                <ui:ProgressRing.Style>
                    <Style TargetType="{x:Type ui:ProgressRing}">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsBusy}" Value="False">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsFastCheckInProgress}" Value="True">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsModlistInstallInProgress, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Value="True">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ui:ProgressRing.Style>
            </ui:ProgressRing>
        </Grid>

        <!--  ============================================================  -->
        <!--  FLOATING OVERLAYS: Mod Info Panel, Modlist Install, Data Backup  -->
        <!--  ============================================================  -->

        <!--  Selected Mod Info Panel (Draggable Floating Panel)  -->
        <Canvas
            x:Name="ModInfoOverlay"
            Grid.RowSpan="3"
            Panel.ZIndex="400">
            <Border
                x:Name="MODINFO_border"
                Canvas.Left="1060"
                Canvas.Top="350"
                Width="326"
                Height="230"
                Panel.ZIndex="400"
                Background="{DynamicResource Brush.ModCard.Background.Active}"
                BorderBrush="{DynamicResource Brush.Button.Bevel.Light}"
                BorderThickness="1,1,0.5,0.5"
                CornerRadius="8,8,8,8"
                LostMouseCapture="ModInfoBorder_OnLostMouseCapture"
                MouseLeftButtonDown="ModInfoBorder_OnMouseLeftButtonDown"
                MouseLeftButtonUp="ModInfoBorder_OnMouseLeftButtonUp"
                MouseMove="ModInfoBorder_OnMouseMove">
                <Border.Style>
                    <Style TargetType="{x:Type Border}">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Setter Property="IsHitTestVisible" Value="False" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding HasSelectedMods}" Value="True">
                                <Setter Property="Visibility" Value="Visible" />
                                <Setter Property="IsHitTestVisible" Value="True" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsViewingModlistTab}" Value="True">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Setter Property="IsHitTestVisible" Value="False" />
                            </DataTrigger>
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding SearchModDatabase}" Value="True" />
                                    <Condition Binding="{Binding UseModDbDesignView}" Value="True" />
                                </MultiDataTrigger.Conditions>
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Setter Property="IsHitTestVisible" Value="False" />
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <Border.Effect>
                    <DropShadowEffect
                        BlurRadius="20"
                        Direction="270"
                        Opacity="0.2"
                        ShadowDepth="8"
                        Color="{DynamicResource Palette.BaseSurface.Shadowed}" />
                </Border.Effect>
                <Grid
                    x:Name="MODINFO_grid"
                    Width="324"
                    Height="223"
                    Background="Transparent">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="53*" />
                        <ColumnDefinition Width="28*" />
                    </Grid.ColumnDefinitions>
                    <Grid.Effect>
                        <DropShadowEffect
                            BlurRadius="6"
                            Direction="270"
                            Opacity="0.1"
                            ShadowDepth="4"
                            Color="{DynamicResource Palette.BaseSurface.Shadowed}" />
                    </Grid.Effect>
                    <!--  Close Button  -->
                    <Button
                        Grid.Column="0"
                        Width="16"
                        Height="16"
                        Margin="4,4,0,0"
                        Padding="0,0,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        Panel.ZIndex="1000"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        BorderThickness="0"
                        Click="CloseModInfoButton_OnClick"
                        Content=""
                        Cursor="Hand"
                        FontSize="8"
                        FontWeight="Bold"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Style="{DynamicResource CloseButton}"
                        ToolTip="Close and deselect mod">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <ContentPresenter
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    RecognizesAccessKey="True" />
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <WrapPanel
                        Grid.Column="1"
                        Margin="0,10,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Orientation="Vertical"
                        SnapsToDevicePixels="True">
                        <Button
                            x:Name="SelectedModEditConfigButton"
                            MinWidth="92"
                            MinHeight="32"
                            Margin="0,3,0,3"
                            Padding="12,6"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            HorizontalContentAlignment="Stretch"
                            VerticalContentAlignment="Stretch"
                            Background="{DynamicResource Brush.Button.Primary.Background.Normal}"
                            BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                            Click="EditConfigButton_OnClick"
                            Content="Edit Config"
                            IsEnabled="False"
                            Visibility="Visible" />
                        <Button
                            x:Name="SelectedModDatabasePageButton"
                            MinWidth="92"
                            MinHeight="32"
                            Margin="0,3,0,3"
                            Padding="12,6"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            VerticalContentAlignment="Center"
                            Background="{DynamicResource Brush.Button.Primary.Background.Normal}"
                            BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                            Click="ModDatabasePageButton_OnClick"
                            Content="Mod Page"
                            IsEnabled="False"
                            ToolTip="{Binding ModDatabasePageUrlDisplay}"
                            Visibility="Visible" />
                        <Button
                            x:Name="SelectedModDeleteButton"
                            MinWidth="92"
                            MinHeight="32"
                            Margin="0,3,0,3"
                            Padding="12,6"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Background="{DynamicResource Brush.Status.Error}"
                            BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                            Click="DeleteModButton_OnClick"
                            IsEnabled="False"
                            Visibility="Visible">
                            <Button.Style>
                                <Style BasedOn="{StaticResource {x:Type Button}}" TargetType="{x:Type Button}">
                                    <Setter Property="ToolTip" Value="{Binding DisplayName, StringFormat=Delete \{0\}}" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding DataContext.HasMultipleSelectedMods, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Value="True">
                                            <Setter Property="ToolTip" Value="Delete selected mods" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">

                                <TextBlock
                                    VerticalAlignment="Center"
                                    Foreground="{DynamicResource Brush.Text.Primary}"
                                    Text="Delete" />
                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="SelectedModFixButton"
                            MinWidth="92"
                            MinHeight="32"
                            Margin="0,3,0,3"
                            Padding="12,6"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top"
                            Background="{DynamicResource Brush.Status.Error}"
                            BorderBrush="{DynamicResource Brush.Text.Primary}"
                            Click="FixModButton_OnClick"
                            IsEnabled="False"
                            ToolTip="Resolve dependency issues"
                            Visibility="Collapsed">
                            <Button.Style>
                                <Style BasedOn="{StaticResource {x:Type Button}}" TargetType="{x:Type Button}">
                                    <Setter Property="Background" Value="{DynamicResource Brush.Status.Error}" />
                                    <Setter Property="BorderBrush" Value="{DynamicResource Brush.Text.Primary}" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type Button}">
                                                <Border
                                                    x:Name="Root"
                                                    Padding="{TemplateBinding Padding}"
                                                    Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="{TemplateBinding ui:ControlHelper.CornerRadius}"
                                                    SnapsToDevicePixels="True">
                                                    <ContentPresenter
                                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                        RecognizesAccessKey="True" />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsEnabled" Value="False">
                                                        <Setter TargetName="Root" Property="Opacity" Value="0.6" />
                                                    </Trigger>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="Root" Property="Background" Value="{DynamicResource Brush.Status.Error}" />
                                                        <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource Brush.Text.Primary}" />
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="Root" Property="Background" Value="{DynamicResource Brush.Status.Error}" />
                                                        <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource Brush.Text.Primary}" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">

                                <TextBlock VerticalAlignment="Center" Text="Fix" />
                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="SelectedModCopyForServerButton"
                            MinWidth="92"
                            MinHeight="32"
                            Margin="0,3,0,3"
                            Padding="4,6,4,6"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Background="{DynamicResource Brush.Button.Primary.Background.Normal}"
                            BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                            Click="SelectedModCopyForServerButton_OnClick"
                            Content="Copy for Server"
                            IsEnabled="False"
                            Visibility="Visible" />
                    </WrapPanel>
                    <ComboBox
                        x:Name="SelectedModVersionComboBox"
                        Width="166"
                        MinHeight="32"
                        Margin="23,180,0,0"
                        Padding="12,6"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        ui:ControlHelper.CornerRadius="6"
                        Background="{DynamicResource Brush.ComboBox.Background.Normal}"
                        BorderBrush="{DynamicResource Brush.ComboBox.Border.Normal}"
                        BorderThickness="1"
                        DropDownOpened="SelectedModVersionComboBox_OnDropDownOpened"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        ItemsSource="{Binding SelectedMod.VersionOptions}"
                        SelectedItem="{Binding SelectedMod.SelectedVersionOption, Mode=TwoWay}"
                        SelectionChanged="SelectedModVersionComboBox_OnSelectionChanged">
                        <ComboBox.Resources>
                            <DataTemplate x:Key="SelectedModVersionTemplate" DataType="{x:Type viewModels:ModVersionOptionViewModel}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding SelectionDisplay}" />
                                    <TextBlock
                                        Margin="6,0,0,0"
                                        Foreground="{DynamicResource Brush.Accent.Primary}"
                                        Text="">
                                        <TextBlock.Style>
                                            <Style TargetType="{x:Type TextBlock}">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsCompatible}" Value="True">
                                                        <Setter Property="Visibility" Value="Visible" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>
                            </DataTemplate>
                        </ComboBox.Resources>
                        <ComboBox.Style>
                            <Style BasedOn="{StaticResource {x:Type ComboBox}}" TargetType="{x:Type ComboBox}">
                                <Setter Property="Visibility" Value="Visible" />
                                <Setter Property="IsEnabled" Value="False" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedMod.HasVersionOptions}" Value="True">
                                        <Setter Property="Visibility" Value="Visible" />
                                        <Setter Property="IsEnabled" Value="True" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding DataContext.SearchModDatabase, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Value="True">
                                        <Setter Property="Visibility" Value="Visible" />
                                        <Setter Property="IsEnabled" Value="False" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding HasMultipleSelectedMods}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Setter Property="IsEnabled" Value="False" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ComboBox.Style>
                        <ComboBox.ItemTemplate>
                            <StaticResource ResourceKey="SelectedModVersionTemplate" />
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <Button
                        x:Name="SelectedModUpdateButton"
                        Grid.Column="1"
                        MinWidth="32"
                        MinHeight="32"
                        MaxHeight="33"
                        Margin="0,170,0,0"
                        Padding="4,4,4,4"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="{DynamicResource Brush.Button.Primary.Background.Normal}"
                        BorderBrush="{DynamicResource Brush.Panel.Secondary.Background.Solid}"
                        Click="UpdateModButton_OnClick"
                        IsEnabled="False"
                        ToolTip="{Binding UpdateButtonToolTip}"
                        UseLayoutRounding="True"
                        Visibility="Visible">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Width="90">
                                <Run Text="Update to latest" />
                            </TextBlock>
                        </StackPanel>
                    </Button>
                    <TextBlock
                        Width="189"
                        Height="25"
                        Margin="23,15,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        TextAlignment="Left">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Text" Value="{Binding SelectedMod.DisplayName}" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding HasMultipleSelectedMods}" Value="True">
                                        <Setter Property="Text" Value="Multiple mods selected" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                    <TextBlock
                        Width="189"
                        Height="105"
                        MaxWidth="420"
                        MaxHeight="143"
                        Margin="23,45,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        FontSize="14"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Text="{Binding SelectedMod.DescriptionDisplay}"
                        TextAlignment="Left"
                        TextTrimming="CharacterEllipsis"
                        TextWrapping="Wrap">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Visibility" Value="Visible" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding HasMultipleSelectedMods}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </Grid>
            </Border>
        </Canvas>

        <!--  Modlist Installation Progress Overlay  -->
        <Border
            x:Name="ModlistInstallOverlay"
            Grid.RowSpan="3"
            Margin="0,0,0,-8"
            Panel.ZIndex="5500"
            d:IsHidden="True"
            Background="#C0000000"
            IsHitTestVisible="True"
            Visibility="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=IsModlistInstallInProgress, Converter={StaticResource IMM.VisibleWhenTrueConverter}}">
            <Border
                Width="497"
                Height="260"
                Padding="32"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="{DynamicResource Brush.Panel.Primary.Background.Solid}"
                CornerRadius="10">
                <StackPanel>
                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="18"
                        FontWeight="Bold"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Text="Installing modlist..." />
                    <ProgressBar
                        Height="18"
                        Margin="0,16,0,8"
                        Maximum="100"
                        Minimum="0"
                        Value="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=ModlistInstallProgress}" />
                    <TextBlock
                        Height="40"
                        Margin="0,8,0,8"
                        FontSize="14"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Text="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=ModlistInstallStatusMessage}"
                        TextWrapping="Wrap" />
                    <TextBlock
                        Margin="0,8,0,0"
                        HorizontalAlignment="Center"
                        FontSize="13"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Text="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=ModlistDownloadSpeed, StringFormat=Download speed: {0}}"
                        TextWrapping="Wrap"
                        Visibility="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=HasModlistDownloadSpeed, Converter={StaticResource IMM.VisibleWhenTrueConverter}}" />
                </StackPanel>
            </Border>
        </Border>

        <!--  Data Backup Progress Overlay  -->
        <Border
            x:Name="DataBackupOverlay"
            Grid.RowSpan="3"
            Margin="0,0,0,-8"
            Panel.ZIndex="5000"
            d:IsHidden="True"
            Background="#C0000000"
            IsHitTestVisible="True"
            Visibility="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=IsDataBackupInProgress, Converter={StaticResource IMM.VisibleWhenTrueConverter}}">
            <Border
                Width="420"
                Padding="32"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="{DynamicResource Brush.Panel.Primary.Background.Solid}"
                CornerRadius="10">
                <StackPanel>
                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="18"
                        FontWeight="Bold"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Text="Please wait..." />
                    <ProgressBar
                        Height="18"
                        Margin="0,16,0,8"
                        Maximum="100"
                        Minimum="0"
                        Value="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataBackupProgress}" />
                    <TextBlock
                        Margin="0,0,0,8"
                        FontSize="14"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Text="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataBackupStatusMessage}"
                        TextWrapping="Wrap" />
                    <TextBlock
                        Width="228"
                        FontSize="13"
                        Foreground="{DynamicResource Brush.Text.Primary}"
                        Text="Simple VS Manager disables all controls while the backup finishes."
                        TextAlignment="Center"
                        TextWrapping="Wrap" />
                </StackPanel>
            </Border>
        </Border>

    </Grid>
</Window>